### ✅ GHN TRACKING TEST REQUESTS
### File này dùng để test tracking feature cho cả DEV và PRODUCTION
### Có thể dùng với REST Client extension trong VS Code hoặc Postman/Thunder Client
 
### ============================================
### 0. SHOP OWNER / CLIENT ACTIONS (Quick test helpers)
### ============================================

### Shop owner: Confirm an order (PENDING -> CONFIRMED)
# Replace {orderId} with real order id
PUT http://localhost:8005/v1/order/shop-owner/orders/dcf67836-d3ff-4f57-aec7-3808570c6071/status?status=CONFIRMED
Authorization: Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlcyI6WyJST0xFX1VTRVIiLCJST0xFX1NIT1BfT1dORVIiXSwidXNlcklkIjoiOTAzMTBlNmMtZjAwYS00Mzg1LWI1ZWMtOTdmNWIzNjIwYzlmIiwic3ViIjoibmd1eWVudHJ1bmd0aHVhbjQxN0BnbWFpbC5jb20iLCJpc3MiOiJhdXRoLXNlcnZpY2UiLCJpYXQiOjE3NjYyMjQ0NzIsImV4cCI6MTc2NjIyODA3Mn0.YP8-a7QeYeEpEVDDBbKUgUmJ8XKSZVyHxXOv7qeoM3I
Content-Type: application/json

###

### Client: Confirm receipt after DELIVERED (DELIVERED -> COMPLETED)
# Replace {orderId} with real order id
POST http://localhost:8005/v1/order/confirm/{orderId}
Authorization: Bearer <USER_JWT>
Content-Type: application/json

###

### ============================================
### 1. SYNC GHN STATUS (Tự động sync từ GHN API)
### ============================================

### Sync status cho một đơn hàng cụ thể
POST http://localhost:8005/v1/order/sync-ghn-status/LKYDTN
Content-Type: application/json

###

### Sync tất cả đơn hàng đang pending
POST http://localhost:8005/v1/order/sync-all-ghn-orders
Content-Type: application/json

###

### ============================================
### 2. GET TRACKING INFO (Lấy thông tin tracking)
### ============================================

### Get tracking info bằng GHN Order Code
GET http://localhost:8005/v1/order/tracking/LKYDTN
Content-Type: application/json

###

### Get tracking info bằng Order ID (convenience endpoint)
GET http://localhost:8005/v1/order/{orderId}/tracking
Content-Type: application/json

# Replace {orderId} với order ID thực tế
# Ví dụ: GET http://localhost:8005/v1/order/order-123/tracking

###

### ============================================
### 3. SIMULATE GHN STATUS (Chỉ cho DEV/TEST)
### ============================================

### Simulate shipper đã lấy hàng
POST http://localhost:8005/v1/order/simulate-ghn-status/LKYDTN
Content-Type: application/json

{
  "status": "picked"
}

###

### Simulate đang giao hàng
POST http://localhost:8005/v1/order/simulate-ghn-status/LKYDTN
Content-Type: application/json

{
  "status": "delivering"
}

###

### Simulate đã giao hàng
POST http://localhost:8005/v1/order/simulate-ghn-status/LKYDTN
Content-Type: application/json

{
  "status": "delivered"
}

###

### ============================================
### 4. TEST FLOW HOÀN CHỈNH (DEV/TEST)
### ============================================

### Bước 1: Tạo đơn hàng (nếu chưa có)
# POST http://localhost:8005/v1/order/create-from-cart
# ... (dùng endpoint tạo đơn hàng hiện có)

### Bước 2: Lấy GHN Order Code từ ShippingOrder
# Query database hoặc từ response khi tạo đơn

### Bước 3: Simulate shipper lấy hàng
POST http://localhost:8005/v1/order/simulate-ghn-status/LKRDG9
Content-Type: application/json

{
  "status": "picked"
}

###

### Bước 4: Get tracking info (sẽ có simulated location)
GET http://localhost:8005/v1/order/tracking/LKRDG9
Content-Type: application/json

###

### Bước 5: Simulate đang giao hàng
POST http://localhost:8005/v1/order/simulate-ghn-status/LKRDG9
Content-Type: application/json

{
  "status": "delivering"
}

###

### Bước 6: Get tracking info lại (location sẽ di chuyển)
GET http://localhost:8005/v1/order/tracking/LKRDG9
Content-Type: application/json

###

### Bước 7: Simulate đã giao hàng
POST http://localhost:8005/v1/order/simulate-ghn-status/LKRDG9
Content-Type: application/json

{
  "status": "delivered"
}

###

### Bước 8: Get tracking info cuối cùng
GET http://localhost:8005/v1/order/tracking/LKYDTN
Content-Type: application/json

###

### ============================================
### 5. PRODUCTION TEST (Khi có đơn hàng thật)
### ============================================

### Production: Sync status từ GHN (scheduled job tự động chạy mỗi 2 phút)
POST http://localhost:8005/v1/order/sync-ghn-status/{GHN_ORDER_CODE}
Content-Type: application/json

# Replace {GHN_ORDER_CODE} với GHN order code thực tế

###

### Production: Get tracking info (sẽ có location từ GHN API nếu shipper share)
GET http://localhost:8005/v1/order/tracking/{GHN_ORDER_CODE}
Content-Type: application/json

# Replace {GHN_ORDER_CODE} với GHN order code thực tế

###

### ============================================
### 6. POLLING TEST (Frontend simulation)
### ============================================

### Poll tracking info mỗi 10 giây (simulate frontend polling)
# Frontend sẽ gọi endpoint này mỗi 10-30 giây khi đơn hàng đang SHIPPED/DELIVERING
GET http://localhost:8005/v1/order/tracking/LKYDTN
Content-Type: application/json

###

### ============================================
### NOTES:
### ============================================
### 1. DEV/TEST Environment:
###    - Dùng simulate-ghn-status để test flow
###    - Simulation service tự động update location mỗi 30 giây
###    - Location sẽ di chuyển từ shop → customer
###
### 2. PRODUCTION Environment:
###    - Dùng sync-ghn-status để sync từ GHN API
###    - Scheduled job tự động sync mỗi 2 phút
###    - Location sẽ có từ GHN API nếu shipper share GPS
###
### 3. Frontend Integration:
###    - Poll GET /tracking/{ghnOrderCode} mỗi 10-30 giây
###    - Hiển thị location trên bản đồ
###    - Update UI khi có status/location mới

